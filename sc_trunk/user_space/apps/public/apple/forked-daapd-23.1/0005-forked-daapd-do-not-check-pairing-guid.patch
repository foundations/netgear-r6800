From f4a0f219e1cab43dfa90098059de01e9bedcc6b5 Mon Sep 17 00:00:00 2001
From: root <root@localhost.localdomain>
Date: Fri, 19 Jun 2015 15:29:37 +0800
Subject: [PATCH 5/6] forked daapd do not check pairing guid

---
 src/httpd_daap.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/src/httpd_daap.c b/src/httpd_daap.c
index 08a27e1..c840d4c 100644
--- a/src/httpd_daap.c
+++ b/src/httpd_daap.c
@@ -72,6 +72,8 @@ extern struct event_base *evbase_httpd;
 /* Database number for the Radio item */
 #define DAAP_DB_RADIO 2
 
+#define DONT_CHECK_PAIRING_GUID
+
 struct uri_map {
   regex_t preg;
   char *regexp;
@@ -958,6 +960,8 @@ daap_reply_login(struct evhttp_request *req, struct evbuffer *evbuf, char **uri,
       pi.guid = strdup(param + 2); /* Skip leading 0X */
 
       ret = db_pairing_fetch_byguid(&pi);
+#ifdef DONT_CHECK_PAIRING_GUID
+#else
       if (ret < 0)
 	{
 	  DPRINTF(E_LOG, L_DAAP, "Login attempt with invalid pairing-guid\n");
@@ -966,6 +970,7 @@ daap_reply_login(struct evhttp_request *req, struct evbuffer *evbuf, char **uri,
 	  evhttp_send_error(req, 403, "Forbidden");
 	  return -1;
 	}
+#endif
 
       DPRINTF(E_INFO, L_DAAP, "Remote '%s' logging in with GUID %s\n", pi.name, pi.guid);
       free_pi(&pi, 1);
-- 
1.6.5.2

